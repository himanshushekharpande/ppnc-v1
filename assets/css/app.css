/* assets/css/app.css
 *
 * Tailwind + DaisyUI friendly app stylesheet
 * - Uses Tailwind layers
 * - Provides CSS variables for JS-theme toggling or fallbacks
 * - Provides lightweight component wrappers mapped to DaisyUI classes
 *
 * Notes:
 * - DaisyUI plugin + theme should be registered in tailwind.config.cjs (recommended).
 * - Once templates are migrated, you can remove many of these wrapper classes and
 *   use DaisyUI classes directly (e.g. `btn btn-primary`, `card`, etc.).
 */
/* Import your additional overrides last so they can override the component layer */
/* @import "./custom.css"; */

/* Tailwind core layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------------------------
   CSS variables (JS-toggle friendly)
   ---------------------------
   Useful when toggling themes via `document.documentElement.classList`
   or when you need runtime access to theme colors.
*/
:root {
  /* primary palette */
  --ppnc-primary: #1C4383;           /* marian-blue */
  --ppnc-primary-content: #ffffff;

  --ppnc-secondary: #2A9ED5;         /* celestial-blue */
  --ppnc-secondary-content: #072030;

  --ppnc-accent: #69B4E4;            /* argentinian-blue */
  --ppnc-accent-content: #072030;

  --ppnc-neutral: #272A4C;           /* space-cadet */
  --ppnc-neutral-content: #ffffff;

  --ppnc-base-100: #ffffff;
  --ppnc-base-200: #F5F7FA;
  --ppnc-base-300: #E5E7EB;

  --ppnc-info: #2A9ED5;
  --ppnc-success: #22C55E;
  --ppnc-warning: #F59E0B;
  --ppnc-error: #EF4444;
}

/* Optional: theme class (if you toggle themes via class)
   Example usage: <html class="theme-ppnc"> ... </html>
*/
.theme-ppnc {
  --color-primary: var(--ppnc-primary);
  --color-primary-content: var(--ppnc-primary-content);

  --color-secondary: var(--ppnc-secondary);
  --color-secondary-content: var(--ppnc-secondary-content);

  --color-accent: var(--ppnc-accent);
  --color-accent-content: var(--ppnc-accent-content);

  --color-neutral: var(--ppnc-neutral);
  --color-neutral-content: var(--ppnc-neutral-content);

  --color-base-100: var(--ppnc-base-100);
  --color-base-200: var(--ppnc-base-200);
  --color-base-300: var(--ppnc-base-300);
}

/* ---------------------------
   Component layer: wrapper classes that play nice with DaisyUI
   - Keep these while migrating. They provide consistent spacing,
     radii, and shadows while DaisyUI supplies color/states.
   - Use DaisyUI classes directly in new templates.
   --------------------------- */
@layer components {
  /* Page container */
  .container-site {
    @apply mx-auto w-full max-w-7xl px-6;
  }

  /* Sections */
  .section {
    @apply py-12 sm:py-16;
    background-color: var(--ppnc-base-100);
  }
  .section-alt {
    @apply py-12 sm:py-16;
    background-image: linear-gradient(to bottom, var(--ppnc-base-100), #F8FAFC);
  }

  /* Card primitives: uses DaisyUI's base classes for color, ours for spacing/shadow */
  .card {
    /* keep DaisyUI's card color classes available (bg-base-100 etc.) */
    @apply rounded-2xl border border-gray-100;
    box-shadow: var(--tw-shadow, 0 10px 20px rgba(39,42,76,.06));
    background-color: var(--ppnc-base-100);
  }
  .card-padded {
    @apply p-6 md:p-8;
  }

  /* Kicker (small uppercase label) */
  .kicker {
    @apply uppercase tracking-[0.18em] text-xs font-semibold;
    color: color-mix(in srgb, var(--ppnc-primary) 80%, transparent);
  }

  /* Buttons
     - Prefer DaisyUI classes `btn`, `btn-primary`, `btn-ghost`, etc. in markup.
     - These wrappers keep your previous markup stable while adopting Daisy's color tokens.
  */
  /* Base button primitives for your wrappers */
  .btn,
  .btn-primary,
  .btn-ghost,
  .btn-soft {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-5 py-3 font-semibold transition;
    /* micro fallback for browsers before theme paints */
    --btn-bg-fallback: var(--ppnc-primary);
  }

  /* Variants (no @apply btn here) */
  .btn-primary {
    @apply shadow-btn;
    background-color: var(--ppnc-primary);
    color: var(--ppnc-primary-content);
  }

  .btn-ghost {
    /* keep using Tailwind core utilities only */
    @apply bg-white/10 border border-white/30 text-white hover:bg-white/20;
  }

  .btn-soft {
    background-color: color-mix(in srgb, var(--ppnc-accent) 15%, white);
    color: var(--ppnc-primary);
  }


  /* Chip */
  .chip {
    @apply inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm;
    background-color: color-mix(in srgb, var(--ppnc-accent) 15%, white);
    color: var(--ppnc-primary);
  }

  /* Stats */
  .stat {
    @apply text-3xl md:text-4xl font-extrabold;
    color: var(--ppnc-primary);
  }
  .stat-sub {
    @apply text-sm text-gray-500;
  }

  /* Utility shadow tokens for convenience */
  .shadow-card {
    box-shadow: 0 10px 20px rgba(39,42,76,.06);
  }
  .shadow-btn {
    box-shadow: 0 6px 12px rgba(28,67,131,.18);
  }

  /* Dropdown animations */
  .dropdown-content {
    animation: dropdownFade 0.2s ease-out;
  }

  @keyframes dropdownFade {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Mobile submenu transitions */
  .mobile-menu-subitems {
    transition: all 0.3s ease-in-out;
  }

  .mobile-menu-header svg {
    transition: transform 0.3s ease;
  }

  /* Active state improvements */
  .mobile-menu-group.active .mobile-menu-subitems {
    display: block;
  }

  /* Ensure dropdowns appear above other content */
  .dropdown {
    z-index: 40;
  }

  .dropdown-content {
    z-index: 50;
  }
}

/* ---------------------------
   Enhanced Dropdown Styles
   --------------------------- */
/* Enhanced Dropdown Styles - Fixed Gap Issue */
.nav-dropdown {
  position: relative;
}

.nav-dropdown-menu {
  transform: translateY(-10px);
  transition: all 0.2s ease-in-out;
  /* Strong shadow for better visibility */
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  border: 1px solid #e5e7eb !important;
  /* Bridge the gap between menu and dropdown */
  margin-top: 0 !important;
}

/* Create an invisible bridge to prevent hover gap */
.nav-dropdown::after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 0;
  width: 100%;
  height: 8px;
  background: transparent;
  z-index: 49;
}

.group:hover .nav-dropdown-menu {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

/* Ensure dropdowns stand out against white background */
.nav-dropdown-menu::before {
  content: '';
  position: absolute;
  top: -8px;
  left: 20px;
  width: 16px;
  height: 16px;
  background: white;
  transform: rotate(45deg);
  border-top: 1px solid #e5e7eb;
  border-left: 1px solid #e5e7eb;
  z-index: -1;
}

/* Hover states for dropdown items */
.nav-dropdown-menu a {
  position: relative;
  z-index: 1;
  margin: 0 8px;
  border-radius: 6px;
}

.nav-dropdown-menu a:hover {
  background-color: var(--ppnc-primary) !important;
  color: white !important;
}

/* Ensure dropdowns don't affect layout when hidden */
.nav-dropdown-menu {
  pointer-events: none;
}

.group:hover .nav-dropdown-menu {
  pointer-events: auto;
}

/* Improved group hover behavior */
.nav-dropdown:hover .nav-dropdown-menu {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  pointer-events: auto;
}

/* Mobile menu improvements */
.mobile-menu-subitems {
  transition: max-height 0.3s ease-in-out;
  max-height: 0;
  overflow: hidden;
  background-color: #f8fafc;
  border-radius: 8px;
  margin-top: 4px;
  margin-bottom: 4px;
}

.mobile-menu-subitems:not(.hidden) {
  max-height: 500px; /* Adjust based on your content */
}

.mobile-menu-subitems a {
  border-radius: 6px;
  margin: 0 4px;
}

.mobile-menu-subitems a:hover {
  background-color: var(--ppnc-primary);
  color: white;
}

/* Prevent flash of expanded content */
.mobile-menu-group {
  position: relative;
}

/* ---------------------------
   Small accessibility helpers
   --------------------------- */
/* Focus visible ring tuned to primary color */
:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px color-mix(in srgb, var(--ppnc-primary) 12%, transparent);
  border-radius: 0.375rem;
}

/* ---------------------------
   Utilities / helpers you might keep
   - If you prefer using aliases like .text-marian-blue, add here.
   - Keep these minimal to avoid duplication with Tailwind utilities.
   --------------------------- */
@layer utilities {
  .text-marian-blue { color: #1C4383; }
  .bg-marian-blue { background-color: #1C4383; }
  .bg-argentinian-blue-15 { background-color: color-mix(in srgb, #69B4E4 15%, white); }
  
  /* Additional utility for dropdown spacing */
  .dropdown-shadow {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
}

/* ---------------------------------
Prose styles
---------------------------------*/
/* Improved spacing for markdown content */
.prose {
  max-width: none;
}

.prose h1 {
  @apply text-4xl font-bold text-marian-blue mb-8 mt-12;
}

.prose h2 {
  @apply text-3xl font-bold text-marian-blue mb-6 mt-10;
}

.prose h3 {
  @apply text-2xl font-semibold text-gray-800 mb-4 mt-8;
}

.prose p {
  @apply mb-6 text-gray-700 leading-relaxed;
}

.prose ul, .prose ol {
  @apply mb-6;
}

.prose li {
  @apply mb-3 text-gray-700;
}

/* Custom step styling */
.steps-container {
  counter-reset: step-counter;
}

.step-number {
  @apply flex-shrink-0;
}

/* Improved card spacing */
.card-padded {
  @apply p-8;
}

/* Better table styling */
.table-zebra tbody tr:nth-child(even) {
  /* use your own CSS var, already defined at :root */
  background-color: var(--ppnc-base-200);
}

/* Enhanced list styling */
.list-inside li {
  @apply pl-4;
}