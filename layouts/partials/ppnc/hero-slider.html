<section class="relative w-full overflow-hidden pt-20 md:pt-24">
  <div class="relative w-full h-[50vh] md:h-hero min-h-[400px] max-h-[600px] md:max-h-hero">

    <div class="hero-slider absolute inset-0 z-0">
      {{ $slides := site.Params.hero.slides }}
      {{ range $i, $slide := $slides }}
      <div class="hero-slide absolute inset-0 w-full h-full opacity-0 pointer-events-none transition-opacity duration-500 {{ if eq $i 0 }}opacity-100 pointer-events-auto active{{ end }}">
        <picture>
          <source media="(max-width: 768px)"
                  srcset="{{ $slide.mobile | relURL }} 1x, {{ (replace $slide.mobile ".webp" "@2x.webp") | relURL }} 2x">
          <source media="(max-width: 1024px)"
                  srcset="{{ $slide.tablet | relURL }} 1x, {{ (replace $slide.tablet ".webp" "@2x.webp") | relURL }} 2x">
          <img src="{{ $slide.desktop | relURL }}"
               srcset="{{ $slide.desktop | relURL }} 1x, {{ (replace $slide.desktop ".webp" "@2x.webp") | relURL }} 2x"
               alt="{{ $slide.title }}"
               class="w-full h-full object-cover"
               {{ if eq $i 0 }}loading="eager" fetchpriority="high"{{ else }}loading="lazy"{{ end }}
               decoding="async">
        </picture>

        <!-- Minimal overlay: only CTA button (no title/text/large overlay) -->
        <div class="absolute inset-0 z-20 pointer-events-none">
          <div class="container-site h-full flex items-end md:items-end pb-6 md:pb-10">
            <div class="w-full flex justify-center md:justify-center">
              {{ with $slide.ctaLink }}
              <a href="{{ . }}"
                 class="pointer-events-auto inline-flex items-center justify-center px-5 py-2 rounded-full text-sm md:text-base font-semibold shadow-lg transition-transform transform hover:-translate-y-0.5
                        bg-gradient-to-r from-[#ff6b35] to-[#ff8f5a] text-white
                        backdrop-blur-sm bg-black/30">
                {{ $slide.ctaText }}
              </a>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
      {{ end }}
    </div>

    <!-- Dots & Arrows -->
    <div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-30 flex space-x-2">
      {{ range $i, $_ := $slides }}
      <button class="slider-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-colors {{ if eq $i 0 }}active{{ end }}" data-slide="{{ $i }}" aria-label="Go to slide {{ add $i 1 }}"></button>
      {{ end }}
    </div>

    <button class="slider-prev absolute left-4 top-1/2 -translate-y-1/2 z-30 text-white/80 hover:text-white bg-black/30 hover:bg-black/50 rounded-full p-2 transition-all" aria-label="Previous slide">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
    </button>
    <button class="slider-next absolute right-4 top-1/2 -translate-y-1/2 z-30 text-white/80 hover:text-white bg-black/30 hover:bg-black/50 rounded-full p-2 transition-all" aria-label="Next slide">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
    </button>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const slides=[...document.querySelectorAll('.hero-slide')],
        dots=[...document.querySelectorAll('.slider-dot')],
        prev=document.querySelector('.slider-prev'),
        next=document.querySelector('.slider-next');
  let i=0,timer;
  const show=n=>{
    slides.forEach(s=>s.classList.remove('active'));
    dots.forEach(d=>d.classList.remove('active'));
    i=(n+slides.length)%slides.length;
    slides[i].classList.add('active');dots[i].classList.add('active');
  };
  const auto=()=>timer=setInterval(()=>show(i+1),5000);
  const stop=()=>clearInterval(timer);
  next.addEventListener('click',()=>show(i+1));
  prev.addEventListener('click',()=>show(i-1));
  dots.forEach((d,idx)=>d.addEventListener('click',()=>show(idx)));
  const slider=document.querySelector('.hero-slider');
  slider.addEventListener('mouseenter',stop);
  slider.addEventListener('mouseleave',auto);
  auto();
});
</script>