<section class="relative w-full overflow-hidden pt-20 md:pt-24">
  <div class="relative w-full h-[50vh] md:h-hero min-h-[400px] max-h-[600px] md:max-h-hero">

    <div class="hero-slider absolute inset-0 z-0">
      {{ $slides := site.Params.hero.slides }}
      {{ range $i, $slide := $slides }}
      <div class="hero-slide {{ if eq $i 0 }}active{{ end }}">
        <picture>
          <source media="(max-width: 768px)"
                  srcset="{{ $slide.mobile | relURL }} 1x, {{ (replace $slide.mobile ".webp" "@2x.webp") | relURL }} 2x">
          <source media="(max-width: 1024px)"
                  srcset="{{ $slide.tablet | relURL }} 1x, {{ (replace $slide.tablet ".webp" "@2x.webp") | relURL }} 2x">
          <img src="{{ $slide.desktop | relURL }}"
               srcset="{{ $slide.desktop | relURL }} 1x, {{ (replace $slide.desktop ".webp" "@2x.webp") | relURL }} 2x"
               alt="{{ $slide.title }}"
               class="w-full h-full object-cover"
               {{ if eq $i 0 }}loading="eager" fetchpriority="high"{{ else }}loading="lazy"{{ end }}
               decoding="async">
        </picture>

        <!-- Overlay specific to each slide -->
        <div class="absolute inset-0 z-20 flex items-end text-white bg-black/30 md:bg-black/40">
          <div class="container-site pb-6 md:pb-10">
            <div class="max-w-2xl drop-shadow-lg">
              <h1 class="text-2xl sm:text-3xl md:text-5xl font-extrabold leading-tight">{{ $slide.title }}</h1>
              {{ with $slide.text }}
              <p class="mt-3 text-base md:text-lg text-white/90 leading-relaxed">{{ . }}</p>
              {{ end }}
              {{ with $slide.ctaLink }}
              <a href="{{ . }}" class="btn btn-primary mt-4">{{ $slide.ctaText }}</a>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
      {{ end }}
    </div>

    <!-- Dots & Arrows -->
    <div class="absolute bottom-4 left-1/2 -translate-x-1/2 z-30 flex space-x-2">
      {{ range $i, $_ := $slides }}
      <button class="slider-dot w-3 h-3 rounded-full bg-white/50 hover:bg-white/80 transition-colors {{ if eq $i 0 }}active{{ end }}" data-slide="{{ $i }}" aria-label="Go to slide {{ add $i 1 }}"></button>
      {{ end }}
    </div>

    <button class="slider-prev absolute left-4 top-1/2 -translate-y-1/2 z-30 text-white/80 hover:text-white bg-black/30 hover:bg-black/50 rounded-full p-2 transition-all" aria-label="Previous slide">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
    </button>
    <button class="slider-next absolute right-4 top-1/2 -translate-y-1/2 z-30 text-white/80 hover:text-white bg-black/30 hover:bg-black/50 rounded-full p-2 transition-all" aria-label="Next slide">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
    </button>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const slides=[...document.querySelectorAll('.hero-slide')],
        dots=[...document.querySelectorAll('.slider-dot')],
        prev=document.querySelector('.slider-prev'),
        next=document.querySelector('.slider-next');
  let i=0,timer;
  const show=n=>{
    slides.forEach(s=>s.classList.remove('active'));
    dots.forEach(d=>d.classList.remove('active'));
    i=(n+slides.length)%slides.length;
    slides[i].classList.add('active');dots[i].classList.add('active');
  };
  const auto=()=>timer=setInterval(()=>show(i+1),5000);
  const stop=()=>clearInterval(timer);
  next.addEventListener('click',()=>show(i+1));
  prev.addEventListener('click',()=>show(i-1));
  dots.forEach((d,idx)=>d.addEventListener('click',()=>show(idx)));
  const slider=document.querySelector('.hero-slider');
  slider.addEventListener('mouseenter',stop);
  slider.addEventListener('mouseleave',auto);
  auto();
});
</script>